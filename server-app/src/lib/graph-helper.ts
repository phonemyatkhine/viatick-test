//helper for creating object based on adjacency matrix using pins and distance

import { PinOutPutData } from "../database/models/Pin";

export const generateGraph = (pins: PinOutPutData[], distances: any) => {
  const graph: any = new Object();

  for (let index = 0; index < pins.length; index++) {
    const row: any = new Object();
    for (let innerIndex = 0; innerIndex < pins.length; innerIndex++) {
      if (
        distances[index][innerIndex].distance <= process.env.GRAPH_THRESHOLD
      ) {
        if (distances[index][innerIndex].pinId !== index + 1) {
          row[distances[index][innerIndex].pinId] =
            distances[index][innerIndex].distance;
        }
      }
    }
    graph[pins[index].id] = row;
  }
  return graph;
};

// sample graph
// {
//   '1': {
//     '2': 0.43274650174429385,
//     '3': 0.7023893350941408,
//     '4': 0.8896100638737945,
//     '5': 0.25965228233872895,
//     '10': 0.6720137171301335
//   },
//   '2': {
//     '1': 0.43274650174429385,
//     '3': 0.27585136216222383,
//     '4': 0.7682779081104998,
//     '5': 0.23724676037590609,
//     '10': 0.4175179356892053
//   },
//   '3': {
//     '1': 0.7023893350941408,
//     '2': 0.27585136216222383,
//     '4': 0.7376173735213762,
//     '5': 0.4716783710804121,
//     '10': 0.3677870662078392
//   },
//   '4': {
//     '1': 0.8896100638737945,
//     '2': 0.7682779081104998,
//     '3': 0.7376173735213762,
//     '5': 0.6824495747644814,
//     '7': 0.5995929525986659,
//     '9': 0.44630122210586415,
//     '10': 0.37423581289511393
//   },
//   '5': {
//     '1': 0.25965228233872895,
//     '2': 0.23724676037590609,
//     '3': 0.4716783710804121,
//     '4': 0.6824495747644814,
//     '10': 0.4175179356891933
//   },
//   '6': {
//     '7': 0.5685430213777257,
//     '8': 0.24975744844713793,
//     '9': 0.682249203745963
//   },
//   '7': {
//     '4': 0.5995929525986659,
//     '6': 0.5685430213777257,
//     '8': 0.6670303722875531,
//     '9': 0.2840831794262969,
//     '10': 0.9561243374390381
//   },
//   '8': {
//     '6': 0.24975744844713793,
//     '7': 0.6670303722875531,
//     '9': 0.6756932706345458
//   },
//   '9': {
//     '4': 0.44630122210586415,
//     '6': 0.682249203745963,
//     '7': 0.2840831794262969,
//     '8': 0.6756932706345458,
//     '10': 0.7465606300325563
//   },
//   '10': {
//     '1': 0.6720137171301335,
//     '2': 0.4175179356892053,
//     '3': 0.3677870662078392,
//     '4': 0.37423581289511393,
//     '5': 0.4175179356891933,
//     '7': 0.9561243374390381,
//     '9': 0.7465606300325563
//   }
// }
